(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(t,e,n){"use strict";n.r(e);var c=n(1),o=n.n(c),a=n(40),r=n.n(a),i=(n(51),n(4)),s=n.n(i),l=n(14),u=n(41),f=n(42),d=n(44),h=n(45),m=(n(53),n(15)),x=n.n(m),b=n(43),v=n.n(b),g=window.location.hostname,p="localhost"===g?3e3:"",w=window.location.protocol,k="".concat(w,"//").concat(g,":").concat(p),C=v.a.connect(k),y=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).getCubes=Object(l.a)(s.a.mark((function e(){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(k,"/get"));case 3:n=e.sent,c=n.data,t.setState({cubes:c}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),t.getCoords=function(e){var n=e.fromTime,c=e.toTime,o=e.fromX,a=e.toX,r=e.fromY,i=e.toY,s=c-n,l=t.time-n;if(l<s){var u=s/l;return{x:o+(a-o)/u,y:r+(i-r)/u}}return{x:a,y:i}},t.canvasClick=function(){var e=Object(l.a)(s.a.mark((function e(n){var c,o,a,r,i,l,u,f,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.state,o=c.currentCube,a=c.cubes,r=n.pageX,i=n.pageY,!(l=a.find((function(t){return t.id===o})))){e.next=7;break}return u=t.getCoords(l),f=u.x,d=u.y,e.next=7,x.a.post("".concat(k,"/change?id=").concat(o),{fromX:f,fromY:d,toX:r-50,toY:i-50});case 7:C.emit("click");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.drawLoop=function(){var e=t.state,n=e.cubes,c=e.currentCube;t.time=Date.now(),t.ctx.beginPath(),t.ctx.fillStyle="black",t.ctx.rect(0,0,t.c.width,t.c.height),t.ctx.fill(),n.forEach((function(e){var n=t.getCoords(e),o=n.x,a=n.y;t.ctx.beginPath(),t.ctx.fillStyle=t.colors[e.id],t.ctx.rect(o,a,100,100),t.ctx.fill(),e.id==c&&(t.ctx.beginPath(),t.ctx.lineWidth=7,t.ctx.strokeStyle="red",t.ctx.rect(o,a,100,100),t.ctx.stroke()),t.ctx.beginPath(),t.ctx.fillStyle="white",t.ctx.font="30px Arial",t.ctx.fillText(e.name,o,a+45),t.ctx.fill()})),requestAnimationFrame(t.drawLoop)},t.time=Date.now(),t.state={cubes:[],currentCube:1},t.c=null,t.ctx=null,t.colors=["red","orange","green"],t}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.getCubes(),this.c=document.getElementById("canvas"),this.ctx=this.c.getContext("2d"),C.on("click",(function(e){console.log("CLICK"),t.getCubes()})),requestAnimationFrame(this.drawLoop)}},{key:"render",value:function(){var t=this,e=this.state,n=e.cubes,c=e.currentCube;return o.a.createElement("div",null,o.a.createElement("canvas",{onClick:this.canvasClick,width:1500,height:700,id:"canvas"}),o.a.createElement("br",null),n.map((function(e){var n=e.id===c?"select":"";return o.a.createElement("div",{style:{backgroundColor:t.colors[e.id]},onClick:function(){t.setState({currentCube:e.id})},className:"type ".concat(n),key:e.id},e.name)})))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},46:function(t,e,n){t.exports=n(102)},51:function(t,e,n){},53:function(t,e,n){},99:function(t,e){}},[[46,1,2]]]);
//# sourceMappingURL=main.d68c17fd.chunk.js.map